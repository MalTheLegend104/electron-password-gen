<!DOCTYPE html>
<html lang="en">
<head>
	<title>Password Gen</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>
<body>
<main>
	<div class="center">
		<form>
			<label>Character Amount</label>
			<br>
			<input id="chars" type="number" placeholder="Character Amount" autofocus>
			<br>
			<label>Numbers</label>
			<input id="nums" type="checkbox" checked>
			<br>
			<label>Special Characters</label>
			<input id="special" type="checkbox" checked>
			<br>
			<button type="button" onclick="onSubmit()">Submit</button>
		</form>
	</div>
	<div>
		<p style="white-space: nowrap;" id="output"></p>
	</div>
	<script>
		function onSubmit(){
			var chars = 0;
			var chars = parseInt(document.getElementById('chars').value);
			document.getElementById("output").innerHTML = chars;
			var nums = true;
			var nums = document.querySelector('#nums').checked;
			var special = true;
			var special = document.querySelector('#special').checked;
			makePass(chars, nums, special);
		}
	
		function makePass(chars, nums, special){
			chars = parseInt(chars);
			hasNums = Boolean(nums);
			hasSpecial = Boolean(special);
			if (chars > 4096){
				finalChars = 4096;
			} else 
			if (chars < 1){
				finalChars = 8;
			} else if (isNaN(chars)){
				finalChars = 8;
			} else {
				finalChars = chars;
			}
			var finalList = "";
			const alpha = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
			const numbers = "1234567890";
			const specialChars = ",<.>/?!@#$%^&*()_-+=:;\"\u2215|~`'";
			finalList += alpha;
			if (hasNums === true){
				finalList += numbers;
			}
			if (hasSpecial === true){
				finalList += specialChars;
			}
			var password = "";
			for (i = 0; i < finalChars; i++){
				password += finalList.charAt(Math.floor(Math.random() * finalList.length));
			}
			password = password.replace(/"/g, '&#34;');
			password = password.replace(/\//g, '&#47;');
			password = password.replace(/\u2215/g, '&#92;');
			password = password.replace(/</g, '&#60;');
			password = password.replace(/>/g, '&#62;');
			writePassToScreen(password);
		}
	
		function writePassToScreen(password){
			var finalPass = document.getElementById("output");
			finalPass.innerHTML = password;
		}
	</script>
</main>

</body>
</html>
